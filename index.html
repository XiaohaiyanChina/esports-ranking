<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LDTV 排行</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #2ecc71;
            --secondary-color: #27ae60;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --gray-color: #7f8c8d;
            --white-color: #ffffff;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        /* 导航栏 */
        .navbar {
            background-color: var(--dark-color);
            color: var(--white-color);
            padding: 0 20px;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            height: 70px;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .logo i {
            margin-right: 10px;
        }

        .nav-menu {
            display: flex;
            list-style: none;
        }

        .nav-item {
            margin: 0 15px;
        }

        .nav-link {
            color: var(--white-color);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 4px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-link:hover, .nav-link.active {
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        .admin-badge {
            background-color: var(--warning-color);
            color: var(--dark-color);
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: 5px;
        }

        /* 主内容区 */
        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
        }

        /* 页面标题 */
        .page-title {
            margin-bottom: 30px;
            color: var(--dark-color);
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* 卡片样式 */
        .card {
            background-color: var(--white-color);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 25px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        /* 按钮样式 */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: var(--gray-color);
            color: var(--white-color);
        }

        .btn-secondary:hover {
            background-color: #6c757d;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: var(--white-color);
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .btn i {
            margin-right: 8px;
        }

        /* 表格样式 */
        .table-responsive {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .data-table th, .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .data-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--dark-color);
        }

        .data-table tr:hover {
            background-color: #f8f9fa;
        }

        .team-logo-small {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }

        .player-img-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
        }

        .rating-badge {
            background-color: var(--primary-color);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* 雷达图容器 */
        .radar-container {
            width: 300px;
            height: 300px;
            margin: 20px auto;
        }

        /* 选手对比容器 */
        .compare-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            margin-top: 30px;
        }

        /* 隐藏页面 */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* 赛事卡片 */
        .match-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-left: 5px solid var(--primary-color);
            margin-bottom: 15px;
        }

        .match-date {
            color: var(--gray-color);
            font-size: 0.9rem;
        }

        .match-teams {
            display: flex;
            align-items: center;
            flex-grow: 1;
            justify-content: center;
        }

        .match-team {
            display: flex;
            align-items: center;
            margin: 0 20px;
        }

        .match-score {
            font-weight: bold;
            margin: 0 15px;
            font-size: 1.2rem;
        }

        .match-tournament {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* 战队卡片 */
        .team-card {
            display: flex;
            padding: 20px;
            align-items: center;
            border-left: 5px solid;
            margin-bottom: 20px;
        }

        .team-rank {
            font-size: 2rem;
            font-weight: bold;
            color: var(--gray-color);
            margin-right: 20px;
            min-width: 50px;
            text-align: center;
        }

        .team-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-right: 20px;
            object-fit: cover;
            border: 3px solid var(--light-color);
        }

        .team-info {
            flex-grow: 1;
        }

        .team-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .team-players {
            display: flex;
            margin-top: 15px;
        }

        .player-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 5px;
            object-fit: cover;
            border: 2px solid var(--light-color);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .player-avatar:hover {
            transform: scale(1.2);
            border-color: var(--primary-color);
        }

        /* 表单样式 */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .form-row {
            display: flex;
            gap: 20px;
        }

        .form-col {
            flex: 1;
        }

        /* 管理员页面 */
        .admin-section {
            margin-bottom: 40px;
            padding: 20px;
            background-color: var(--white-color);
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        .admin-section h3 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
            color: var(--dark-color);
        }

        /* 文件上传 */
        .file-upload {
            position: relative;
            display: inline-block;
            cursor: pointer;
            width: 100%;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-upload-label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
            background-color: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-label:hover {
            border-color: var(--primary-color);
            background-color: rgba(46, 204, 113, 0.1);
        }

        /* 数据统计项 */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray-color);
            margin-top: 5px;
        }

        /* 管理员登录遮罩层 */
        #admin-login-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        /* 响应式设计 */
        @media (max-width: 992px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .compare-container {
                flex-direction: column;
            }
            
            .match-teams {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .match-team {
                margin: 10px 0;
            }
            
            .team-card {
                flex-direction: column;
                text-align: center;
            }
            
            .team-rank {
                margin-right: 0;
                margin-bottom: 10px;
            }
        }

        @media (max-width: 768px) {
            .nav-menu {
                flex-direction: column;
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                background-color: var(--dark-color);
                transition: 0.3s;
                box-shadow: 0 10px 27px rgba(0, 0, 0, 0.05);
                z-index: 999;
            }

            .nav-menu.active {
                left: 0;
            }

            .nav-item {
                margin: 10px 0;
            }

            .hamburger {
                display: block;
                cursor: pointer;
            }

            .hamburger.active .bar:nth-child(2) {
                opacity: 0;
            }

            .hamburger.active .bar:nth-child(1) {
                transform: translateY(8px) rotate(45deg);
            }

            .hamburger.active .bar:nth-child(3) {
                transform: translateY(-8px) rotate(-45deg);
            }
        }

        /* 杂项 */
        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--gray-color);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ddd;
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tab-nav {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .tab-link {
            padding: 12px 20px;
            cursor: pointer;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: var(--gray-color);
            transition: all 0.3s ease;
        }

        .tab-link:hover, .tab-link.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-trophy"></i>
                <span>LDTV</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-page="home">
                        <i class="fas fa-calendar-alt"></i> 赛事
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="teams">
                        <i class="fas fa-users"></i> 战队
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="players">
                        <i class="fas fa-user"></i> 选手
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="admin">
                        <i class="fas fa-cog"></i> 管理员 <span class="admin-badge">Admin</span>
                    </a>
                </li>
            </ul>
            <div class="hamburger">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </div>
    </nav>

    <!-- 管理员登录遮罩层 -->
    <div id="admin-login-overlay">
        <div class="card" style="width: 400px; max-width: 90%;">
            <div class="page-title">
                <h2>管理员登录</h2>
            </div>
            <div class="form-group">
                <label class="form-label" for="admin-password">密码</label>
                <input type="password" id="admin-password" class="form-control" placeholder="请输入管理员密码">
                <small style="color: var(--gray-color); margin-top: 5px; display: block;">默认密码: admin123</small>
            </div>
            <div class="form-group" style="display: flex; gap: 10px;">
                <button class="btn btn-primary" id="admin-login-btn" style="flex: 1;">
                    <i class="fas fa-sign-in-alt"></i> 登录
                </button>
                <button class="btn btn-secondary" id="admin-login-cancel" style="flex: 1;">
                    <i class="fas fa-times"></i> 取消
                </button>
            </div>
            <div id="admin-login-error" style="color: var(--danger-color); margin-top: 10px; display: none;">
                <i class="fas fa-exclamation-circle"></i> 密码错误，请重试！
            </div>
        </div>
    </div>

    <!-- 主内容区 -->
    <div class="container">
        <!-- 首页：赛事页面 -->
        <div id="home-page" class="page active">
            <div class="page-title">
                <h2>赛事日程与结果</h2>
                <div class="tab-nav">
                    <button class="tab-link active" data-tab="today">今日赛程</button>
                    <button class="tab-link" data-tab="past">往期赛果</button>
                    <button class="tab-link" data-tab="upcoming">未来赛事</button>
                </div>
            </div>

            <div id="today-matches" class="tab-content">
                <div class="card">
                    <h3>今日赛程 <span class="match-date">2023年12月4日</span></h3>
                    <div class="match-card">
                        <div class="match-tournament">Start ladder Budapest Major 2025</div>
                        <div class="match-teams">
                            <div class="match-team">
                                <img src="https://via.placeholder.com/40" class="team-logo-small" alt="Falcons">
                                <span>Falcons</span>
                            </div>
                            <div class="match-score">VS</div>
                            <div class="match-team">
                                <img src="https://via.placeholder.com/40" class="team-logo-small" alt="BB">
                                <span>BB</span>
                            </div>
                        </div>
                        <div class="match-time">23:00</div>
                    </div>
                </div>
            </div>

            <div id="past-matches" class="tab-content" style="display: none;">
                <div class="card">
                    <h3>往期赛果</h3>
                    <div class="match-card">
                        <div class="match-tournament">BLAST Rivals 2025 Season 2</div>
                        <div class="match-teams">
                            <div class="match-team">
                                <img src="https://via.placeholder.com/40" class="team-logo-small" alt="Falcons">
                                <span>Falcons</span>
                            </div>
                            <div class="match-score">1 : 3</div>
                            <div class="match-team">
                                <img src="https://via.placeholder.com/40" class="team-logo-small" alt="FURIA">
                                <span>FURIA</span>
                            </div>
                        </div>
                        <div class="match-date">2023-12-01</div>
                    </div>
                    <div class="match-card">
                        <div class="match-tournament">BLAST Rivals 2025 Season 2</div>
                        <div class="match-teams">
                            <div class="match-team">
                                <img src="https://via.placeholder.com/40" class="team-logo-small" alt="Falcons">
                                <span>Falcons</span>
                            </div>
                            <div class="match-score">2 : 0</div>
                            <div class="match-team">
                                <img src="https://via.placeholder.com/40" class="team-logo-small" alt="Vitality">
                                <span>Vitality</span>
                            </div>
                        </div>
                        <div class="match-date">2023-11-28</div>
                    </div>
                </div>
            </div>

            <div id="upcoming-matches" class="tab-content" style="display: none;">
                <div class="card">
                    <h3>未来赛事</h3>
                    <div class="match-card">
                        <div class="match-tournament">IEM Katowice 2024</div>
                        <div class="match-teams">
                            <div class="match-team">
                                <img src="https://via.placeholder.com/40" class="team-logo-small" alt="Falcons">
                                <span>Falcons</span>
                            </div>
                            <div class="match-score">VS</div>
                            <div class="match-team">
                                <img src="https://via.placeholder.com/40" class="team-logo-small" alt="NaVi">
                                <span>NaVi</span>
                            </div>
                        </div>
                        <div class="match-date">2024-02-10</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 战队页面 -->
        <div id="teams-page" class="page">
            <div class="page-title">
                <h2>战队排行榜</h2>
                <div>按积分排名</div>
            </div>

            <div id="teams-list">
                <!-- 战队列表将通过JS动态生成 -->
            </div>
        </div>

        <!-- 选手页面 -->
        <div id="players-page" class="page">
            <div class="page-title">
                <h2>选手排行榜</h2>
                <div>按Rating 3.0排名</div>
            </div>

            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>排名</th>
                            <th>选手</th>
                            <th>战队</th>
                            <th>Rating 3.0</th>
                            <th>火力</th>
                            <th>首杀</th>
                            <th>补枪</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="players-table">
                        <!-- 选手列表将通过JS动态生成 -->
                    </tbody>
                </table>
            </div>

            <div id="player-detail" style="display: none;">
                <div class="page-title">
                    <h2 id="player-detail-name"></h2>
                    <button class="btn btn-secondary" id="back-to-players">
                        <i class="fas fa-arrow-left"></i> 返回选手列表
                    </button>
                </div>

                <div class="card">
                    <div class="form-row">
                        <div class="form-col">
                            <div class="player-header">
                                <img id="player-detail-img" src="https://via.placeholder.com/150" class="player-avatar" style="width: 150px; height: 150px;">
                                <h3 id="player-detail-name-full"></h3>
                                <p>战队: <span id="player-detail-team"></span></p>
                                <p>年龄: <span id="player-detail-age"></span> | 国籍: <span id="player-detail-country"></span></p>
                            </div>

                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-value" id="player-rating">1.14</div>
                                    <div class="stat-label">Rating 3.0</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="player-firepower">91</div>
                                    <div class="stat-label">火力</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="player-entrying">59</div>
                                    <div class="stat-label">首杀</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="player-trading">68</div>
                                    <div class="stat-label">补枪</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-col">
                            <div class="radar-container">
                                <canvas id="player-radar"></canvas>
                            </div>
                            <div>
                                <h4>选择对比选手</h4>
                                <select id="compare-player-select" class="form-control">
                                    <option value="">选择对比选手</option>
                                </select>
                                <div class="radar-container" id="compare-radar-container" style="display: none;">
                                    <canvas id="compare-radar"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 管理员页面 -->
        <div id="admin-page" class="page">
            <div class="page-title">
                <div>
                    <h2>管理员面板</h2>
                    <p>管理战队、选手和赛事数据</p>
                </div>
                <button class="btn btn-secondary" id="admin-logout-btn">
                    <i class="fas fa-sign-out-alt"></i> 退出登录
                </button>
            </div>

            <div class="admin-section">
                <h3><i class="fas fa-users"></i> 战队管理</h3>
                <div class="form-row">
                    <div class="form-col">
                        <h4>添加/编辑战队</h4>
                        <form id="team-form">
                            <input type="hidden" id="team-id">
                            <div class="form-group">
                                <label class="form-label" for="team-name">战队名称</label>
                                <input type="text" id="team-name" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="team-rank">世界排名</label>
                                <input type="number" id="team-rank" class="form-control" min="1" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="team-points">积分</label>
                                <input type="number" id="team-points" class="form-control" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="team-coach">教练</label>
                                <input type="text" id="team-coach" class="form-control">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="team-logo-upload">战队徽标</label>
                                <div class="file-upload">
                                    <label for="team-logo-upload" class="file-upload-label">
                                        <i class="fas fa-cloud-upload-alt"></i> 点击上传图片
                                    </label>
                                    <input type="file" id="team-logo-upload" accept="image/*">
                                </div>
                                <div id="team-logo-preview" style="margin-top: 10px;"></div>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> 保存战队
                                </button>
                                <button type="button" class="btn btn-secondary" id="reset-team-form">
                                    <i class="fas fa-redo"></i> 重置
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="form-col">
                        <h4>战队列表</h4>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>战队</th>
                                        <th>排名</th>
                                        <th>积分</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-teams-list">
                                    <!-- 战队列表将通过JS动态生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="admin-section">
                <h3><i class="fas fa-user"></i> 选手管理</h3>
                <div class="form-row">
                    <div class="form-col">
                        <h4>添加/编辑选手</h4>
                        <form id="player-form">
                            <input type="hidden" id="player-id">
                            <div class="form-group">
                                <label class="form-label" for="player-name">选手姓名</label>
                                <input type="text" id="player-name" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="player-team">所属战队</label>
                                <select id="player-team" class="form-control" required>
                                    <option value="">选择战队</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="player-age">年龄</label>
                                <input type="number" id="player-age" class="form-control" min="15" max="50">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="player-country">国籍</label>
                                <input type="text" id="player-country" class="form-control">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="player-rating-input">Rating 3.0</label>
                                <input type="number" id="player-rating-input" class="form-control" min="0" max="2" step="0.01">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="player-img-upload">选手照片</label>
                                <div class="file-upload">
                                    <label for="player-img-upload" class="file-upload-label">
                                        <i class="fas fa-cloud-upload-alt"></i> 点击上传图片
                                    </label>
                                    <input type="file" id="player-img-upload" accept="image/*">
                                </div>
                                <div id="player-img-preview" style="margin-top: 10px;"></div>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> 保存选手
                                </button>
                                <button type="button" class="btn btn-secondary" id="reset-player-form">
                                    <i class="fas fa-redo"></i> 重置
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="form-col">
                        <div class="form-row">
                            <div class="form-col">
                                <h4>选手数据</h4>
                                <div class="form-group">
                                    <label class="form-label" for="player-firepower-input">火力 (Firepower)</label>
                                    <input type="range" id="player-firepower-input" class="form-control" min="0" max="100" value="50">
                                    <span id="firepower-value">50</span>/100
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="player-entrying-input">首杀 (Entrying)</label>
                                    <input type="range" id="player-entrying-input" class="form-control" min="0" max="100" value="50">
                                    <span id="entrying-value">50</span>/100
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="player-trading-input">补枪 (Trading)</label>
                                    <input type="range" id="player-trading-input" class="form-control" min="0" max="100" value="50">
                                    <span id="trading-value">50</span>/100
                                </div>
                            </div>
                            <div class="form-col">
                                <h4>&nbsp;</h4>
                                <div class="form-group">
                                    <label class="form-label" for="player-opening-input">开局 (Opening)</label>
                                    <input type="range" id="player-opening-input" class="form-control" min="0" max="100" value="50">
                                    <span id="opening-value">50</span>/100
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="player-clutching-input">残局 (Clutching)</label>
                                    <input type="range" id="player-clutching-input" class="form-control" min="0" max="100" value="50">
                                    <span id="clutching-value">50</span>/100
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="player-utility-input">道具 (Utility)</label>
                                    <input type="range" id="player-utility-input" class="form-control" min="0" max="100" value="50">
                                    <span id="utility-value">50</span>/100
                                </div>
                            </div>
                        </div>
                        <h4>选手列表</h4>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>选手</th>
                                        <th>战队</th>
                                        <th>Rating</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-players-list">
                                    <!-- 选手列表将通过JS动态生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="admin-section">
                <h3><i class="fas fa-calendar-alt"></i> 赛事管理</h3>
                <div class="form-row">
                    <div class="form-col">
                        <h4>添加/编辑赛事</h4>
                        <form id="match-form">
                            <div class="form-group">
                                <label class="form-label" for="match-tournament">赛事名称</label>
                                <input type="text" id="match-tournament" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="match-team1">战队1</label>
                                <select id="match-team1" class="form-control" required>
                                    <option value="">选择战队</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="match-team2">战队2</label>
                                <select id="match-team2" class="form-control" required>
                                    <option value="">选择战队</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="match-score1">比分 (战队1)</label>
                                <input type="number" id="match-score1" class="form-control" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="match-score2">比分 (战队2)</label>
                                <input type="number" id="match-score2" class="form-control" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="match-date">比赛日期</label>
                                <input type="date" id="match-date" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="match-type">赛事类型</label>
                                <select id="match-type" class="form-control">
                                    <option value="upcoming">未来赛事</option>
                                    <option value="today">今日赛程</option>
                                    <option value="past">往期赛果</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> 保存赛事
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="form-col">
                        <h4>赛事列表</h4>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>赛事</th>
                                        <th>战队</th>
                                        <th>比分</th>
                                        <th>日期</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-matches-list">
                                    <!-- 赛事列表将通过JS动态生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 修改密码部分 -->
            <div class="admin-section">
                <h3><i class="fas fa-key"></i> 修改管理员密码</h3>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label" for="current-password">当前密码</label>
                            <input type="password" id="current-password" class="form-control">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="new-password">新密码</label>
                            <input type="password" id="new-password" class="form-control">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="confirm-password">确认新密码</label>
                            <input type="password" id="confirm-password" class="form-control">
                        </div>
                        <div class="form-group">
                            <button class="btn btn-primary" id="change-password-btn">
                                <i class="fas fa-save"></i> 修改密码
                            </button>
                        </div>
                        <div id="password-change-message" style="margin-top: 10px; display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 全局数据存储
        let appData = {
            teams: [],
            players: [],
            matches: [],
            currentPlayerId: null,
            radarChart: null,
            compareRadarChart: null,
            adminAuthenticated: false, // 添加管理员认证状态
            adminPassword: "admin123" // 默认密码
        };

        // 初始化数据
        function initData() {
            // 尝试从localStorage加载数据
            const savedData = localStorage.getItem('csgoRankingsData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                appData.teams = parsedData.teams;
                appData.players = parsedData.players;
                appData.matches = parsedData.matches;
                // 如果保存了密码，则加载
                if (parsedData.adminPassword) {
                    appData.adminPassword = parsedData.adminPassword;
                }
            } else {
                // 默认数据
                appData.teams = [
                    {
                        id: 1,
                        name: "Falcons",
                        rank: 2,
                        points: 950,
                        coach: "Danny 'zonic' Sørensen",
                        logo: "https://via.placeholder.com/80/2ecc71/FFFFFF?text=F",
                        players: [1, 2, 3, 4, 5]
                    },
                    {
                        id: 2,
                        name: "Vitality",
                        rank: 1,
                        points: 1050,
                        coach: "XTQZZZ",
                        logo: "https://via.placeholder.com/80/e74c3c/FFFFFF?text=V",
                        players: [6, 7, 8, 9, 10]
                    },
                    {
                        id: 3,
                        name: "FaZe",
                        rank: 3,
                        points: 900,
                        coach: "RobbaN",
                        logo: "https://via.placeholder.com/80/3498db/FFFFFF?text=FZ",
                        players: [11, 12, 13, 14, 15]
                    }
                ];

                appData.players = [
                    {
                        id: 1,
                        name: "kyousuke",
                        realName: "Maxim Lukin",
                        teamId: 1,
                        age: 17,
                        country: "Russia",
                        rating: 1.14,
                        img: "https://via.placeholder.com/150/2ecc71/FFFFFF?text=K",
                        stats: {
                            firepower: 91,
                            entrying: 59,
                            trading: 68,
                            opening: 82,
                            clutching: 41,
                            sniping: 0,
                            utility: 27
                        }
                    },
                    {
                        id: 2,
                        name: "Niko",
                        realName: "Nikola Kovač",
                        teamId: 1,
                        age: 26,
                        country: "Bosnia",
                        rating: 1.15,
                        img: "https://via.placeholder.com/150/2ecc71/FFFFFF?text=N",
                        stats: {
                            firepower: 95,
                            entrying: 85,
                            trading: 75,
                            opening: 80,
                            clutching: 65,
                            sniping: 30,
                            utility: 45
                        }
                    },
                    {
                        id: 3,
                        name: "mONESY",
                        realName: "Ilya Osipov",
                        teamId: 1,
                        age: 18,
                        country: "Russia",
                        rating: 1.20,
                        img: "https://via.placeholder.com/150/2ecc71/FFFFFF?text=M",
                        stats: {
                            firepower: 90,
                            entrying: 70,
                            trading: 80,
                            opening: 85,
                            clutching: 60,
                            sniping: 95,
                            utility: 40
                        }
                    },
                    {
                        id: 6,
                        name: "ZywOo",
                        realName: "Mathieu Herbaut",
                        teamId: 2,
                        age: 22,
                        country: "France",
                        rating: 1.30,
                        img: "https://via.placeholder.com/150/e74c3c/FFFFFF?text=Z",
                        stats: {
                            firepower: 98,
                            entrying: 75,
                            trading: 85,
                            opening: 90,
                            clutching: 95,
                            sniping: 90,
                            utility: 60
                        }
                    },
                    {
                        id: 11,
                        name: "rain",
                        realName: "Håvard Nygaard",
                        teamId: 3,
                        age: 28,
                        country: "Norway",
                        rating: 1.08,
                        img: "https://via.placeholder.com/150/3498db/FFFFFF?text=R",
                        stats: {
                            firepower: 88,
                            entrying: 80,
                            trading: 70,
                            opening: 75,
                            clutching: 50,
                            sniping: 20,
                            utility: 35
                        }
                    }
                ];

                appData.matches = [
                    {
                        id: 1,
                        tournament: "Start ladder Budapest Major 2025",
                        team1Id: 1,
                        team2Id: 4,
                        score1: null,
                        score2: null,
                        date: "2023-12-04",
                        time: "23:00",
                        type: "today"
                    },
                    {
                        id: 2,
                        tournament: "BLAST Rivals 2025 Season 2",
                        team1Id: 1,
                        team2Id: 5,
                        score1: 1,
                        score2: 3,
                        date: "2023-12-01",
                        time: "",
                        type: "past"
                    },
                    {
                        id: 3,
                        tournament: "BLAST Rivals 2025 Season 2",
                        team1Id: 1,
                        team2Id: 2,
                        score1: 2,
                        score2: 0,
                        date: "2023-11-28",
                        time: "",
                        type: "past"
                    },
                    {
                        id: 4,
                        tournament: "IEM Katowice 2024",
                        team1Id: 1,
                        team2Id: 6,
                        score1: null,
                        score2: null,
                        date: "2024-02-10",
                        time: "",
                        type: "upcoming"
                    }
                ];
            }

            saveData();
        }

        // 保存数据到localStorage
        function saveData() {
            const dataToSave = {
                teams: appData.teams,
                players: appData.players,
                matches: appData.matches,
                adminPassword: appData.adminPassword
            };
            localStorage.setItem('csgoRankingsData', JSON.stringify(dataToSave));
        }

        // 获取战队名称
        function getTeamName(teamId) {
            const team = appData.teams.find(t => t.id === teamId);
            return team ? team.name : "未知战队";
        }

        // 获取战队Logo
        function getTeamLogo(teamId) {
            const team = appData.teams.find(t => t.id === teamId);
            return team ? team.logo : "https://via.placeholder.com/40";
        }

        // 显示管理员登录界面
        function showAdminLogin() {
            document.getElementById('admin-login-overlay').style.display = 'flex';
            document.getElementById('admin-password').value = '';
            document.getElementById('admin-login-error').style.display = 'none';
            document.getElementById('admin-password').focus();
        }

        // 隐藏管理员登录界面
        function hideAdminLogin() {
            document.getElementById('admin-login-overlay').style.display = 'none';
        }

        // 管理员登录验证
        function adminLogin() {
            const password = document.getElementById('admin-password').value;
            const errorDiv = document.getElementById('admin-login-error');
            
            // 简单密码验证，实际应用中应该使用更安全的验证方式
            if (password === appData.adminPassword) {
                appData.adminAuthenticated = true;
                hideAdminLogin();
                switchPage('admin');
                
                // 保存认证状态到sessionStorage（会话期间有效）
                sessionStorage.setItem('adminAuthenticated', 'true');
            } else {
                errorDiv.style.display = 'block';
                document.getElementById('admin-password').value = '';
                document.getElementById('admin-password').focus();
            }
        }

        // 管理员登出
        function adminLogout() {
            appData.adminAuthenticated = false;
            sessionStorage.removeItem('adminAuthenticated');
            
            // 如果当前在管理员页面，跳转到首页
            if (document.getElementById('admin-page').classList.contains('active')) {
                switchPage('home');
            }
            
            alert('已退出管理员登录');
        }

        // 页面切换
        function switchPage(pageId) {
            // 如果是管理员页面且未认证，显示登录界面
            if (pageId === 'admin' && !appData.adminAuthenticated) {
                showAdminLogin();
                return; // 不切换页面
            }
            
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // 移除所有导航链接的active类
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // 显示目标页面
            document.getElementById(pageId + '-page').classList.add('active');

            // 设置目标导航链接为active
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');

            // 根据页面加载数据
            if (pageId === 'home') {
                loadMatches();
            } else if (pageId === 'teams') {
                loadTeams();
            } else if (pageId === 'players') {
                loadPlayers();
            } else if (pageId === 'admin') {
                loadAdminData();
            }
        }

        // 加载赛事数据
        function loadMatches() {
            const todayMatches = appData.matches.filter(m => m.type === 'today');
            const pastMatches = appData.matches.filter(m => m.type === 'past');
            const upcomingMatches = appData.matches.filter(m => m.type === 'upcoming');

            // 今日赛程
            const todayContainer = document.getElementById('today-matches');
            todayContainer.innerHTML = '';
            
            if (todayMatches.length > 0) {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<h3>今日赛程 <span class="match-date">${new Date().toLocaleDateString('zh-CN')}</span></h3>`;
                
                todayMatches.forEach(match => {
                    const matchElement = createMatchElement(match);
                    card.appendChild(matchElement);
                });
                
                todayContainer.appendChild(card);
            } else {
                todayContainer.innerHTML = '<div class="card empty-state"><i class="fas fa-calendar-times"></i><p>今日暂无赛事</p></div>';
            }

            // 往期赛果
            const pastContainer = document.getElementById('past-matches');
            pastContainer.innerHTML = '';
            
            if (pastMatches.length > 0) {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = '<h3>往期赛果</h3>';
                
                pastMatches.forEach(match => {
                    const matchElement = createMatchElement(match);
                    card.appendChild(matchElement);
                });
                
                pastContainer.appendChild(card);
            } else {
                pastContainer.innerHTML = '<div class="card empty-state"><i class="fas fa-history"></i><p>暂无往期赛事</p></div>';
            }

            // 未来赛事
            const upcomingContainer = document.getElementById('upcoming-matches');
            upcomingContainer.innerHTML = '';
            
            if (upcomingMatches.length > 0) {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = '<h3>未来赛事</h3>';
                
                upcomingMatches.forEach(match => {
                    const matchElement = createMatchElement(match);
                    card.appendChild(matchElement);
                });
                
                upcomingContainer.appendChild(card);
            } else {
                upcomingContainer.innerHTML = '<div class="card empty-state"><i class="fas fa-calendar-plus"></i><p>暂无未来赛事</p></div>';
            }
        }

        // 创建赛事元素
        function createMatchElement(match) {
            const div = document.createElement('div');
            div.className = 'match-card';
            
            const team1Name = getTeamName(match.team1Id);
            const team2Name = getTeamName(match.team2Id);
            const team1Logo = getTeamLogo(match.team1Id);
            const team2Logo = getTeamLogo(match.team2Id);
            
            let scoreDisplay = 'VS';
            if (match.score1 !== null && match.score2 !== null) {
                scoreDisplay = `${match.score1} : ${match.score2}`;
            }
            
            const date = new Date(match.date);
            const formattedDate = date.toLocaleDateString('zh-CN');
            
            div.innerHTML = `
                <div class="match-tournament">${match.tournament}</div>
                <div class="match-teams">
                    <div class="match-team">
                        <img src="${team1Logo}" class="team-logo-small" alt="${team1Name}">
                        <span>${team1Name}</span>
                    </div>
                    <div class="match-score">${scoreDisplay}</div>
                    <div class="match-team">
                        <img src="${team2Logo}" class="team-logo-small" alt="${team2Name}">
                        <span>${team2Name}</span>
                    </div>
                </div>
                <div class="match-date">${formattedDate}${match.time ? ' ' + match.time : ''}</div>
            `;
            
            return div;
        }

        // 加载战队数据
        function loadTeams() {
            const teamsList = document.getElementById('teams-list');
            teamsList.innerHTML = '';
            
            // 按积分排序
            const sortedTeams = [...appData.teams].sort((a, b) => b.points - a.points);
            
            sortedTeams.forEach((team, index) => {
                const teamPlayers = appData.players.filter(p => p.teamId === team.id);
                
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card card';
                teamCard.style.borderLeftColor = index === 0 ? '#f39c12' : (index === 1 ? '#95a5a6' : (index === 2 ? '#cd7f32' : '#2ecc71'));
                
                teamCard.innerHTML = `
                    <div class="team-rank">#${index + 1}</div>
                    <img src="${team.logo}" class="team-logo" alt="${team.name}">
                    <div class="team-info">
                        <div class="team-name">${team.name}</div>
                        <div>世界排名: #${team.rank} | 积分: ${team.points}</div>
                        <div>教练: ${team.coach}</div>
                        <div class="team-players">
                            ${teamPlayers.map(player => `
                                <img src="${player.img}" class="player-avatar" alt="${player.name}" 
                                     title="${player.name}" data-player-id="${player.id}">
                            `).join('')}
                        </div>
                    </div>
                    <div>
                        <button class="btn btn-primary view-team-btn" data-team-id="${team.id}">
                            <i class="fas fa-eye"></i> 查看详情
                        </button>
                    </div>
                `;
                
                teamsList.appendChild(teamCard);
            });
            
            // 添加点击选手事件
            document.querySelectorAll('.player-avatar').forEach(avatar => {
                avatar.addEventListener('click', function() {
                    const playerId = parseInt(this.getAttribute('data-player-id'));
                    showPlayerDetail(playerId);
                    switchPage('players');
                });
            });
            
            // 添加查看战队详情事件
            document.querySelectorAll('.view-team-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const teamId = parseInt(this.getAttribute('data-team-id'));
                    showTeamDetail(teamId);
                });
            });
        }

        // 显示战队详情
        function showTeamDetail(teamId) {
            const team = appData.teams.find(t => t.id === teamId);
            if (!team) return;
            
            const teamPlayers = appData.players.filter(p => p.teamId === team.id);
            const teamMatches = appData.matches.filter(m => m.team1Id === teamId || m.team2Id === teamId);
            
            alert(`战队详情:
名称: ${team.name}
世界排名: #${team.rank}
积分: ${team.points}
教练: ${team.coach}

队员: ${teamPlayers.map(p => p.name).join(', ')}

近期赛事: ${teamMatches.slice(0, 3).map(m => {
    const opponentId = m.team1Id === teamId ? m.team2Id : m.team1Id;
    const opponentName = getTeamName(opponentId);
    const score = m.score1 !== null ? `${m.score1}:${m.score2}` : '未开始';
    return `${opponentName} (${score})`;
}).join(', ')}`);
        }

        // 加载选手数据
        function loadPlayers() {
            const playersTable = document.getElementById('players-table');
            playersTable.innerHTML = '';
            
            // 按Rating排序
            const sortedPlayers = [...appData.players].sort((a, b) => b.rating - a.rating);
            
            sortedPlayers.forEach((player, index) => {
                const team = appData.teams.find(t => t.id === player.teamId);
                const teamName = team ? team.name : "未知";
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>
                        <img src="${player.img}" class="player-img-small" alt="${player.name}">
                        <strong>${player.name}</strong>
                    </td>
                    <td>${teamName}</td>
                    <td><span class="rating-badge">${player.rating.toFixed(2)}</span></td>
                    <td>${player.stats.firepower}</td>
                    <td>${player.stats.entrying}</td>
                    <td>${player.stats.trading}</td>
                    <td>
                        <button class="btn btn-primary btn-sm view-player-btn" data-player-id="${player.id}">
                            <i class="fas fa-eye"></i> 查看
                        </button>
                    </td>
                `;
                
                playersTable.appendChild(row);
            });
            
            // 添加查看选手详情事件
            document.querySelectorAll('.view-player-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const playerId = parseInt(this.getAttribute('data-player-id'));
                    showPlayerDetail(playerId);
                });
            });
        }

        // 显示选手详情
        function showPlayerDetail(playerId) {
            const player = appData.players.find(p => p.id === playerId);
            if (!player) return;
            
            const team = appData.teams.find(t => t.id === player.teamId);
            
            // 显示选手详情区域，隐藏列表
            document.getElementById('players-table').parentNode.parentNode.style.display = 'none';
            document.getElementById('player-detail').style.display = 'block';
            
            // 设置选手信息
            document.getElementById('player-detail-name').textContent = player.name;
            document.getElementById('player-detail-name-full').textContent = player.realName || player.name;
            document.getElementById('player-detail-team').textContent = team ? team.name : "未知";
            document.getElementById('player-detail-age').textContent = player.age || "未知";
            document.getElementById('player-detail-country').textContent = player.country || "未知";
            document.getElementById('player-detail-img').src = player.img;
            
            // 设置选手数据
            document.getElementById('player-rating').textContent = player.rating.toFixed(2);
            document.getElementById('player-firepower').textContent = player.stats.firepower;
            document.getElementById('player-entrying').textContent = player.stats.entrying;
            document.getElementById('player-trading').textContent = player.stats.trading;
            
            // 更新雷达图
            updateRadarChart(player);
            
            // 更新对比选手选择
            updateCompareSelect(playerId);
            
            // 保存当前选手ID
            appData.currentPlayerId = playerId;
        }

        // 更新雷达图
        function updateRadarChart(player, comparePlayer = null) {
            const ctx = document.getElementById('player-radar').getContext('2d');
            
            // 销毁之前的图表
            if (appData.radarChart) {
                appData.radarChart.destroy();
            }
            
            const data = {
                labels: ['火力', '首杀', '补枪', '开局', '残局', '道具'],
                datasets: [
                    {
                        label: player.name,
                        data: [
                            player.stats.firepower,
                            player.stats.entrying,
                            player.stats.trading,
                            player.stats.opening,
                            player.stats.clutching,
                            player.stats.utility
                        ],
                        backgroundColor: 'rgba(46, 204, 113, 0.2)',
                        borderColor: 'rgba(46, 204, 113, 1)',
                        pointBackgroundColor: 'rgba(46, 204, 113, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(46, 204, 113, 1)'
                    }
                ]
            };
            
            if (comparePlayer) {
                data.datasets.push({
                    label: comparePlayer.name,
                    data: [
                        comparePlayer.stats.firepower,
                        comparePlayer.stats.entrying,
                        comparePlayer.stats.trading,
                        comparePlayer.stats.opening,
                        comparePlayer.stats.clutching,
                        comparePlayer.stats.utility
                    ],
                    backgroundColor: 'rgba(52, 152, 219, 0.2)',
                    borderColor: 'rgba(52, 152, 219, 1)',
                    pointBackgroundColor: 'rgba(52, 152, 219, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(52, 152, 219, 1)'
                });
            }
            
            appData.radarChart = new Chart(ctx, {
                type: 'radar',
                data: data,
                options: {
                    scales: {
                        r: {
                            min: 0,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        // 更新对比选手选择
        function updateCompareSelect(currentPlayerId) {
            const select = document.getElementById('compare-player-select');
            select.innerHTML = '<option value="">选择对比选手</option>';
            
            appData.players.forEach(player => {
                if (player.id !== currentPlayerId) {
                    const team = appData.teams.find(t => t.id === player.teamId);
                    const teamName = team ? team.name : "未知";
                    const option = document.createElement('option');
                    option.value = player.id;
                    option.textContent = `${player.name} (${teamName})`;
                    select.appendChild(option);
                }
            });
            
            // 添加对比选择事件
            select.addEventListener('change', function() {
                const comparePlayerId = parseInt(this.value);
                const compareRadarContainer = document.getElementById('compare-radar-container');
                
                if (comparePlayerId) {
                    const currentPlayer = appData.players.find(p => p.id === appData.currentPlayerId);
                    const comparePlayer = appData.players.find(p => p.id === comparePlayerId);
                    
                    if (currentPlayer && comparePlayer) {
                        updateRadarChart(currentPlayer, comparePlayer);
                        compareRadarContainer.style.display = 'block';
                    }
                } else {
                    const currentPlayer = appData.players.find(p => p.id === appData.currentPlayerId);
                    if (currentPlayer) {
                        updateRadarChart(currentPlayer);
                        compareRadarContainer.style.display = 'none';
                    }
                }
            });
        }

        // 加载管理员数据
        function loadAdminData() {
            // 加载战队选择
            const teamSelects = [
                document.getElementById('player-team'),
                document.getElementById('match-team1'),
                document.getElementById('match-team2')
            ];
            
            teamSelects.forEach(select => {
                select.innerHTML = '<option value="">选择战队</option>';
                appData.teams.forEach(team => {
                    const option = document.createElement('option');
                    option.value = team.id;
                    option.textContent = team.name;
                    select.appendChild(option);
                });
            });
            
            // 加载战队列表
            loadAdminTeamsList();
            
            // 加载选手列表
            loadAdminPlayersList();
            
            // 加载赛事列表
            loadAdminMatchesList();
            
            // 初始化滑块值显示
            updateSliderValue('player-firepower-input', 'firepower-value');
            updateSliderValue('player-entrying-input', 'entrying-value');
            updateSliderValue('player-trading-input', 'trading-value');
            updateSliderValue('player-opening-input', 'opening-value');
            updateSliderValue('player-clutching-input', 'clutching-value');
            updateSliderValue('player-utility-input', 'utility-value');
        }

        // 更新滑块值显示
        function updateSliderValue(sliderId, valueId) {
            const slider = document.getElementById(sliderId);
            const valueSpan = document.getElementById(valueId);
            
            if (slider && valueSpan) {
                valueSpan.textContent = slider.value;
                slider.addEventListener('input', function() {
                    valueSpan.textContent = this.value;
                });
            }
        }

        // 加载管理员战队列表
        function loadAdminTeamsList() {
            const list = document.getElementById('admin-teams-list');
            list.innerHTML = '';
            
            appData.teams.forEach(team => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="${team.logo}" class="team-logo-small" alt="${team.name}">
                        ${team.name}
                    </td>
                    <td>#${team.rank}</td>
                    <td>${team.points}</td>
                    <td>
                        <button class="btn btn-primary btn-sm edit-team-btn" data-team-id="${team.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-sm delete-team-btn" data-team-id="${team.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                list.appendChild(row);
            });
            
            // 添加编辑战队事件
            document.querySelectorAll('.edit-team-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const teamId = parseInt(this.getAttribute('data-team-id'));
                    editTeam(teamId);
                });
            });
            
            // 添加删除战队事件
            document.querySelectorAll('.delete-team-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const teamId = parseInt(this.getAttribute('data-team-id'));
                    if (confirm('确定要删除这个战队吗？战队删除后，选手将变为自由选手。')) {
                        deleteTeam(teamId);
                    }
                });
            });
        }

        // 加载管理员选手列表
        function loadAdminPlayersList() {
            const list = document.getElementById('admin-players-list');
            list.innerHTML = '';
            
            appData.players.forEach(player => {
                const team = appData.teams.find(t => t.id === player.teamId);
                const teamName = team ? team.name : "自由选手";
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <img src="${player.img}" class="player-img-small" alt="${player.name}">
                        ${player.name}
                    </td>
                    <td>${teamName}</td>
                    <td>${player.rating.toFixed(2)}</td>
                    <td>
                        <button class="btn btn-primary btn-sm edit-player-btn" data-player-id="${player.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-sm delete-player-btn" data-player-id="${player.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                list.appendChild(row);
            });
            
            // 添加编辑选手事件
            document.querySelectorAll('.edit-player-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const playerId = parseInt(this.getAttribute('data-player-id'));
                    editPlayer(playerId);
                });
            });
            
            // 添加删除选手事件
            document.querySelectorAll('.delete-player-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const playerId = parseInt(this.getAttribute('data-player-id'));
                    if (confirm('确定要删除这个选手吗？')) {
                        deletePlayer(playerId);
                    }
                });
            });
        }

        // 加载管理员赛事列表
        function loadAdminMatchesList() {
            const list = document.getElementById('admin-matches-list');
            list.innerHTML = '';
            
            appData.matches.forEach(match => {
                const team1Name = getTeamName(match.team1Id);
                const team2Name = getTeamName(match.team2Id);
                const date = new Date(match.date);
                const formattedDate = date.toLocaleDateString('zh-CN');
                
                let scoreDisplay = 'VS';
                if (match.score1 !== null && match.score2 !== null) {
                    scoreDisplay = `${match.score1} : ${match.score2}`;
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${match.tournament}</td>
                    <td>${team1Name} vs ${team2Name}</td>
                    <td>${scoreDisplay}</td>
                    <td>${formattedDate}</td>
                    <td>
                        <button class="btn btn-danger btn-sm delete-match-btn" data-match-id="${match.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                list.appendChild(row);
            });
            
            // 添加删除赛事事件
            document.querySelectorAll('.delete-match-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const matchId = parseInt(this.getAttribute('data-match-id'));
                    if (confirm('确定要删除这个赛事吗？')) {
                        deleteMatch(matchId);
                    }
                });
            });
        }

        // 编辑战队
        function editTeam(teamId) {
            const team = appData.teams.find(t => t.id === teamId);
            if (!team) return;
            
            document.getElementById('team-id').value = team.id;
            document.getElementById('team-name').value = team.name;
            document.getElementById('team-rank').value = team.rank;
            document.getElementById('team-points').value = team.points;
            document.getElementById('team-coach').value = team.coach || '';
            
            // 显示Logo预览
            const logoPreview = document.getElementById('team-logo-preview');
            logoPreview.innerHTML = `<img src="${team.logo}" style="max-width: 100px; border-radius: 8px;">`;
            
            // 滚动到表单
            document.getElementById('team-form').scrollIntoView({ behavior: 'smooth' });
        }

        // 删除战队
        function deleteTeam(teamId) {
            // 删除战队
            appData.teams = appData.teams.filter(t => t.id !== teamId);
            
            // 将原战队选手设为自由选手
            appData.players.forEach(player => {
                if (player.teamId === teamId) {
                    player.teamId = null;
                }
            });
            
            // 保存数据并刷新
            saveData();
            loadAdminTeamsList();
            loadAdminPlayersList();
            loadTeams();
            
            alert('战队已删除，原战队选手已设为自由选手。');
        }

        // 编辑选手
        function editPlayer(playerId) {
            const player = appData.players.find(p => p.id === playerId);
            if (!player) return;
            
            document.getElementById('player-id').value = player.id;
            document.getElementById('player-name').value = player.name;
            document.getElementById('player-team').value = player.teamId || '';
            document.getElementById('player-age').value = player.age || '';
            document.getElementById('player-country').value = player.country || '';
            document.getElementById('player-rating-input').value = player.rating || '';
            
            // 设置滑块值
            document.getElementById('player-firepower-input').value = player.stats.firepower;
            document.getElementById('player-entrying-input').value = player.stats.entrying;
            document.getElementById('player-trading-input').value = player.stats.trading;
            document.getElementById('player-opening-input').value = player.stats.opening;
            document.getElementById('player-clutching-input').value = player.stats.clutching;
            document.getElementById('player-utility-input').value = player.stats.utility;
            
            // 更新滑块值显示
            document.getElementById('firepower-value').textContent = player.stats.firepower;
            document.getElementById('entrying-value').textContent = player.stats.entrying;
            document.getElementById('trading-value').textContent = player.stats.trading;
            document.getElementById('opening-value').textContent = player.stats.opening;
            document.getElementById('clutching-value').textContent = player.stats.clutching;
            document.getElementById('utility-value').textContent = player.stats.utility;
            
            // 显示图片预览
            const imgPreview = document.getElementById('player-img-preview');
            imgPreview.innerHTML = `<img src="${player.img}" style="max-width: 100px; border-radius: 8px;">`;
            
            // 滚动到表单
            document.getElementById('player-form').scrollIntoView({ behavior: 'smooth' });
        }

        // 删除选手
        function deletePlayer(playerId) {
            appData.players = appData.players.filter(p => p.id !== playerId);
            
            // 保存数据并刷新
            saveData();
            loadAdminPlayersList();
            loadPlayers();
            
            alert('选手已删除。');
        }

        // 删除赛事
        function deleteMatch(matchId) {
            appData.matches = appData.matches.filter(m => m.id !== matchId);
            
            // 保存数据并刷新
            saveData();
            loadAdminMatchesList();
            loadMatches();
            
            alert('赛事已删除。');
        }

        // 修改管理员密码
        function changeAdminPassword() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const messageDiv = document.getElementById('password-change-message');
            
            messageDiv.style.display = 'block';
            
            // 验证
            if (currentPassword !== appData.adminPassword) {
                messageDiv.innerHTML = '<span style="color: var(--danger-color);"><i class="fas fa-exclamation-circle"></i> 当前密码错误！</span>';
                return;
            }
            
            if (newPassword.length < 4) {
                messageDiv.innerHTML = '<span style="color: var(--danger-color);"><i class="fas fa-exclamation-circle"></i> 新密码长度至少4位！</span>';
                return;
            }
            
            if (newPassword !== confirmPassword) {
                messageDiv.innerHTML = '<span style="color: var(--danger-color);"><i class="fas fa-exclamation-circle"></i> 两次输入的新密码不一致！</span>';
                return;
            }
            
            // 更新密码
            appData.adminPassword = newPassword;
            saveData();
            messageDiv.innerHTML = '<span style="color: var(--primary-color);"><i class="fas fa-check-circle"></i> 密码修改成功！</span>';
            
            // 清空输入框
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
            
            // 3秒后隐藏消息
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 3000);
        }

        // 初始化事件监听
        function initEventListeners() {
            // 导航栏点击事件
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    switchPage(pageId);
                });
            });

            // 赛事标签页点击事件
            document.querySelectorAll('.tab-link').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 移除所有active类
                    document.querySelectorAll('.tab-link').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
                    
                    // 激活当前标签
                    this.classList.add('active');
                    document.getElementById(tabId + '-matches').style.display = 'block';
                });
            });

            // 返回选手列表按钮
            document.getElementById('back-to-players').addEventListener('click', function() {
                document.getElementById('players-table').parentNode.parentNode.style.display = 'block';
                document.getElementById('player-detail').style.display = 'none';
            });

            // 管理员登录相关事件
            document.getElementById('admin-login-btn').addEventListener('click', adminLogin);
            
            document.getElementById('admin-login-cancel').addEventListener('click', function() {
                hideAdminLogin();
                // 取消后返回首页
                switchPage('home');
            });
            
            // 回车键登录
            document.getElementById('admin-password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    adminLogin();
                }
            });
            
            // 登出按钮
            document.getElementById('admin-logout-btn').addEventListener('click', function() {
                if (confirm('确定要退出管理员登录吗？')) {
                    adminLogout();
                }
            });
            
            // 修改密码按钮
            document.getElementById('change-password-btn').addEventListener('click', function() {
                changeAdminPassword();
            });

            // 战队表单提交
            document.getElementById('team-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const teamId = document.getElementById('team-id').value;
                const teamName = document.getElementById('team-name').value;
                const teamRank = parseInt(document.getElementById('team-rank').value);
                const teamPoints = parseInt(document.getElementById('team-points').value);
                const teamCoach = document.getElementById('team-coach').value;
                
                // 获取Logo
                const logoPreview = document.getElementById('team-logo-preview');
                let teamLogo = "https://via.placeholder.com/80/2ecc71/FFFFFF?text=" + teamName.charAt(0);
                if (logoPreview.querySelector('img')) {
                    teamLogo = logoPreview.querySelector('img').src;
                }
                
                if (teamId) {
                    // 编辑现有战队
                    const index = appData.teams.findIndex(t => t.id === parseInt(teamId));
                    if (index !== -1) {
                        appData.teams[index].name = teamName;
                        appData.teams[index].rank = teamRank;
                        appData.teams[index].points = teamPoints;
                        appData.teams[index].coach = teamCoach;
                        appData.teams[index].logo = teamLogo;
                    }
                } else {
                    // 添加新战队
                    const newId = appData.teams.length > 0 ? Math.max(...appData.teams.map(t => t.id)) + 1 : 1;
                    appData.teams.push({
                        id: newId,
                        name: teamName,
                        rank: teamRank,
                        points: teamPoints,
                        coach: teamCoach,
                        logo: teamLogo,
                        players: []
                    });
                }
                
                // 保存数据并刷新
                saveData();
                loadAdminTeamsList();
                loadTeams();
                
                // 重置表单
                this.reset();
                document.getElementById('team-id').value = '';
                logoPreview.innerHTML = '';
                
                alert('战队已保存！');
            });

            // 重置战队表单
            document.getElementById('reset-team-form').addEventListener('click', function() {
                document.getElementById('team-form').reset();
                document.getElementById('team-id').value = '';
                document.getElementById('team-logo-preview').innerHTML = '';
            });

            // 选手表单提交
            document.getElementById('player-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const playerId = document.getElementById('player-id').value;
                const playerName = document.getElementById('player-name').value;
                const playerTeamId = document.getElementById('player-team').value ? parseInt(document.getElementById('player-team').value) : null;
                const playerAge = document.getElementById('player-age').value ? parseInt(document.getElementById('player-age').value) : null;
                const playerCountry = document.getElementById('player-country').value;
                const playerRating = document.getElementById('player-rating-input').value ? parseFloat(document.getElementById('player-rating-input').value) : 1.0;
                
                // 获取选手数据
                const firepower = parseInt(document.getElementById('player-firepower-input').value);
                const entrying = parseInt(document.getElementById('player-entrying-input').value);
                const trading = parseInt(document.getElementById('player-trading-input').value);
                const opening = parseInt(document.getElementById('player-opening-input').value);
                const clutching = parseInt(document.getElementById('player-clutching-input').value);
                const utility = parseInt(document.getElementById('player-utility-input').value);
                
                // 获取图片
                const imgPreview = document.getElementById('player-img-preview');
                let playerImg = "https://via.placeholder.com/150/2ecc71/FFFFFF?text=" + playerName.charAt(0);
                if (imgPreview.querySelector('img')) {
                    playerImg = imgPreview.querySelector('img').src;
                }
                
                if (playerId) {
                    // 编辑现有选手
                    const index = appData.players.findIndex(p => p.id === parseInt(playerId));
                    if (index !== -1) {
                        appData.players[index].name = playerName;
                        appData.players[index].teamId = playerTeamId;
                        appData.players[index].age = playerAge;
                        appData.players[index].country = playerCountry;
                        appData.players[index].rating = playerRating;
                        appData.players[index].img = playerImg;
                        appData.players[index].stats = {
                            firepower,
                            entrying,
                            trading,
                            opening,
                            clutching,
                            sniping: 0,
                            utility
                        };
                    }
                } else {
                    // 添加新选手
                    const newId = appData.players.length > 0 ? Math.max(...appData.players.map(p => p.id)) + 1 : 1;
                    appData.players.push({
                        id: newId,
                        name: playerName,
                        teamId: playerTeamId,
                        age: playerAge,
                        country: playerCountry,
                        rating: playerRating,
                        img: playerImg,
                        stats: {
                            firepower,
                            entrying,
                            trading,
                            opening,
                            clutching,
                            sniping: 0,
                            utility
                        }
                    });
                }
                
                // 保存数据并刷新
                saveData();
                loadAdminPlayersList();
                loadPlayers();
                
                // 重置表单
                this.reset();
                document.getElementById('player-id').value = '';
                imgPreview.innerHTML = '';
                
                // 重置滑块值
                document.getElementById('player-firepower-input').value = 50;
                document.getElementById('player-entrying-input').value = 50;
                document.getElementById('player-trading-input').value = 50;
                document.getElementById('player-opening-input').value = 50;
                document.getElementById('player-clutching-input').value = 50;
                document.getElementById('player-utility-input').value = 50;
                
                // 更新滑块值显示
                document.getElementById('firepower-value').textContent = 50;
                document.getElementById('entrying-value').textContent = 50;
                document.getElementById('trading-value').textContent = 50;
                document.getElementById('opening-value').textContent = 50;
                document.getElementById('clutching-value').textContent = 50;
                document.getElementById('utility-value').textContent = 50;
                
                alert('选手已保存！');
            });

            // 重置选手表单
            document.getElementById('reset-player-form').addEventListener('click', function() {
                document.getElementById('player-form').reset();
                document.getElementById('player-id').value = '';
                document.getElementById('player-img-preview').innerHTML = '';
                
                // 重置滑块值
                document.getElementById('player-firepower-input').value = 50;
                document.getElementById('player-entrying-input').value = 50;
                document.getElementById('player-trading-input').value = 50;
                document.getElementById('player-opening-input').value = 50;
                document.getElementById('player-clutching-input').value = 50;
                document.getElementById('player-utility-input').value = 50;
                
                // 更新滑块值显示
                document.getElementById('firepower-value').textContent = 50;
                document.getElementById('entrying-value').textContent = 50;
                document.getElementById('trading-value').textContent = 50;
                document.getElementById('opening-value').textContent = 50;
                document.getElementById('clutching-value').textContent = 50;
                document.getElementById('utility-value').textContent = 50;
            });

            // 赛事表单提交
            document.getElementById('match-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const tournament = document.getElementById('match-tournament').value;
                const team1Id = parseInt(document.getElementById('match-team1').value);
                const team2Id = parseInt(document.getElementById('match-team2').value);
                const score1 = document.getElementById('match-score1').value ? parseInt(document.getElementById('match-score1').value) : null;
                const score2 = document.getElementById('match-score2').value ? parseInt(document.getElementById('match-score2').value) : null;
                const date = document.getElementById('match-date').value;
                const type = document.getElementById('match-type').value;
                
                // 添加新赛事
                const newId = appData.matches.length > 0 ? Math.max(...appData.matches.map(m => m.id)) + 1 : 1;
                appData.matches.push({
                    id: newId,
                    tournament,
                    team1Id,
                    team2Id,
                    score1,
                    score2,
                    date,
                    time: type === 'today' ? '23:00' : '',
                    type
                });
                
                // 保存数据并刷新
                saveData();
                loadAdminMatchesList();
                loadMatches();
                
                // 重置表单
                this.reset();
                
                alert('赛事已保存！');
            });

            // 战队Logo上传
            document.getElementById('team-logo-upload').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const img = document.createElement('img');
                        img.src = event.target.result;
                        img.style.maxWidth = '100px';
                        img.style.borderRadius = '8px';
                        document.getElementById('team-logo-preview').innerHTML = '';
                        document.getElementById('team-logo-preview').appendChild(img);
                    };
                    reader.readAsDataURL(file);
                }
            });

            // 选手图片上传
            document.getElementById('player-img-upload').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const img = document.createElement('img');
                        img.src = event.target.result;
                        img.style.maxWidth = '100px';
                        img.style.borderRadius = '8px';
                        document.getElementById('player-img-preview').innerHTML = '';
                        document.getElementById('player-img-preview').appendChild(img);
                    };
                    reader.readAsDataURL(file);
                }
            });

            // 汉堡菜单
            document.querySelector('.hamburger').addEventListener('click', function() {
                this.classList.toggle('active');
                document.querySelector('.nav-menu').classList.toggle('active');
            });
            
            // 检查sessionStorage中的认证状态
            if (sessionStorage.getItem('adminAuthenticated') === 'true') {
                appData.adminAuthenticated = true;
            }
        }

        // 初始化应用
        function initApp() {
            initData();
            initEventListeners();
            switchPage('home');
        }

        // 当页面加载完成时初始化应用
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>